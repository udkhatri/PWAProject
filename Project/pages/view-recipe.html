
<ons-page id="view-recipe">
  <script>
        const baseID_URL = "https://spoonacular-recipe-food-nutrition-v1.p.rapidapi.com/recipes/";
        const endID_URL = "/information?includeNutrition=true"
    // const options = {
    //   method: "GET",
    //   headers: {
    //     "X-RapidAPI-Key": "8c3134a6e6msh40114e5b61fc300p13f380jsn0bc270040660",
    //     "X-RapidAPI-Host":
    //       "spoonacular-recipe-food-nutrition-v1.p.rapidapi.com",
    //   },
    // };

    document.addEventListener('show', ({ target }) => {
      if (target.matches('#view-recipe')) {
        //has to be curly brackets 
        let {recipeID} = document.querySelector('#my-navigator').topPage.data;
        var id = recipeID;
        console.log("This is the id from other page " + id); // Get id from the other page"   

        const get = async () => {
          // do the API call and get JSON response
         
          let recipeURL = baseID_URL + id + endID_URL;
          const response = await fetch(recipeURL, options);
          const json = await response.json();

          const nutrientsMap = json.nutrition.nutrients.map(({amount})=> amount);
          const {summary, title, image, instructions} = json;

          // This variables can be used as well, might be easier to read but left to show that both are good the ones in element id and these
          recipeSummary = summary;
          recipeTitle = title;
          recipeImage = image;
          recipeInstructions = instructions;
          caloriesValue = nutrientsMap[0];
          fatValue = nutrientsMap[1];
          carbsValue = nutrientsMap[3];
          proteinValue = nutrientsMap[9];


          document.getElementById('recipeTitle').innerHTML = title;
          document.getElementById("recipeImage").src = image;
          document.getElementById('recipeSummary').innerHTML = summary;
          document.getElementById('recipeInstructions').innerHTML = instructions;
          document.getElementById('caloriesValue').innerHTML = nutrientsMap[0];
          document.getElementById('fatValue').innerHTML = nutrientsMap[1];
          document.getElementById('carbsValue').innerHTML =  nutrientsMap[3];
          document.getElementById('proteinValue').innerHTML = nutrientsMap[9];

        };
        // get the first set of results as soon as the page is initialised
         get();
      }

    });
  </script>
    <ons-toolbar>
        <div class="left"><ons-back-button>back</ons-back-button></div>
        <div class="center">Recipe name</div>
      </ons-toolbar>
  <div>
    <div class="head">
      <p style="text-align: center; size: 50px;">
        <img id="recipeImage" src="icons/apple-splash-1125-2436.jpg" alt="recipe-image" class="profile_pic">
      </p>
      <div class="recipeNameContainer">
        <h1 id="recipeTitle">Pasta</h1>
        <p id="recipeSummary">Lorem ipsum dolor sit amet consectetur adipisicing elit. Corporis, sint fugiat. Repellendus nihil qui accusantium officiis esse distinctio tempore dicta a numquam doloremque incidunt dolore sit explicabo nostrum, maxime magnam!</p>
      </div>
      
    </div>
    <div class="head">
      <div class="contentItem">
        <div class="FatNumber">
          <p id="fatValue" style="font-weight: bold; color: white;">100</p>
        </div>
        <p>Fat</p>
      </div>
      <div class="contentItem">
        <div class="ProteinNumber">
          <p id="proteinValue" style="font-weight: bold; color: white;">100</p>
        </div>
        <p>Protein</p>
      </div>
      <div class="contentItem">
        <div class="CarbsNumber">
          <p id="carbsValue" style="font-weight: bold; color: white;">100</p>
        </div>
        <p>Carbs</p>
      </div>
      <div class="contentItem">
        <div class="CaloriesNumber">
          <p id="caloriesValue" style="font-weight: bold; color: white;">100</p>
        </div>
        <p>Calories</p>
      </div>
    </div>
    <div class="head">
      <p id="recipeInstructions">
        Lorem ipsum, dolor sit amet consectetur adipisicing elit. Molestias molestiae sed expedita ipsa repudiandae numquam natus deleniti, consectetur aliquid dolor nam distinctio obcaecati illo quas omnis consequuntur vitae nemo corrupti sit minus. Ratione aliquam repellendus, quo error, sed natus amet quis praesentium vitae dolore velit ab modi Lorem ipsum dolor sit amet consectetur adipisicing elit. Fugiat ex, incidunt voluptatum officiis necessitatibus quia eaque amet eveniet rem voluptas velit nostrum dolorem dicta ducimus corporis ullam provident enim ab? Labore optio dicta rem inventore quas, maxime tempore minima aspernatur itaque impedit placeat sit perspiciatis sed excepturi cum libero provident!
      </p>
    </div>
  </div>
       
</ons-page>